

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/a937321983/a937321983.atomgit.io.git/img/fluid.png">
  <link rel="icon" href="/a937321983/a937321983.atomgit.io.git/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="liyongci">
  <meta name="keywords" content="">
  
    <meta name="description" content="js数据类型&#x3D;&#x3D;&#x3D;与&#x3D;&#x3D; &#x3D;&#x3D; 自动转换数据类型再比较； &#x3D;&#x3D;&#x3D; 不转换类型  （更好） 例外： NaN &#x3D;&#x3D;&#x3D; NaN  &#x2F;&#x2F; false 字符串使用反引号来表示多行字符串 123var a &#x3D; &#96;这是一个多行字符串&#96;;  字符串不可变：使用a[0">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript基础">
<meta property="og:url" content="https://atomgit.com/a937321983/a937321983.atomgit.io.git/2021/12/20/js-basics/index.html">
<meta property="og:site_name" content="liyongci">
<meta property="og:description" content="js数据类型&#x3D;&#x3D;&#x3D;与&#x3D;&#x3D; &#x3D;&#x3D; 自动转换数据类型再比较； &#x3D;&#x3D;&#x3D; 不转换类型  （更好） 例外： NaN &#x3D;&#x3D;&#x3D; NaN  &#x2F;&#x2F; false 字符串使用反引号来表示多行字符串 123var a &#x3D; &#96;这是一个多行字符串&#96;;  字符串不可变：使用a[0">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-20T01:38:22.000Z">
<meta property="article:modified_time" content="2024-11-05T06:05:06.265Z">
<meta property="article:author" content="liyongci">
<meta property="article:tag" content="basics">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>javascript基础 - liyongci</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/a937321983/a937321983.atomgit.io.git/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/a937321983/a937321983.atomgit.io.git/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/a937321983/a937321983.atomgit.io.git/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"atomgit.com","root":"/a937321983/a937321983.atomgit.io.git/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/a937321983/a937321983.atomgit.io.git/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/a937321983/a937321983.atomgit.io.git/js/utils.js" ></script>
  <script  src="/a937321983/a937321983.atomgit.io.git/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 8.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/a937321983/a937321983.atomgit.io.git/">
      <strong>Li Yongci</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/a937321983/a937321983.atomgit.io.git/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/a937321983/a937321983.atomgit.io.git/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/a937321983/a937321983.atomgit.io.git/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/a937321983/a937321983.atomgit.io.git/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/a937321983/a937321983.atomgit.io.git/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/a937321983/a937321983.atomgit.io.git/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="javascript基础"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-12-20 09:38" pubdate>
          2021年12月20日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          28k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          231 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">javascript基础</h1>
            
            <div class="markdown-body">
              
              <h1 id="js数据类型"><a href="#js数据类型" class="headerlink" title="js数据类型"></a>js数据类型</h1><h3 id="与"><a href="#与" class="headerlink" title="&#x3D;&#x3D;&#x3D;与&#x3D;&#x3D;"></a>&#x3D;&#x3D;&#x3D;与&#x3D;&#x3D;</h3><p> &#x3D;&#x3D; 自动转换数据类型再比较；<br> &#x3D;&#x3D;&#x3D; 不转换类型  （更好）<br> 例外：<br> NaN &#x3D;&#x3D;&#x3D; NaN  &#x2F;&#x2F; false</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>使用反引号来表示多行字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> a = <span class="hljs-string">`这是一个</span><br><span class="hljs-string">多行</span><br><span class="hljs-string">字符串`</span>;<br></code></pre></td></tr></table></figure>

<p>字符串不可变：使用<code>a[0] = &#39;X&#39;</code>并没有改变效果</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>直接给array的length赋新值会改变Array的大小;<br> length变大则新增元素为undefined;变小则删除超出长度的元素;</p>
<p>数组方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">slice   <span class="hljs-comment">// 不加参数可以用于复制数组，不改变本身</span><br>pop<br>push<br>unshift <span class="hljs-comment">// 在头部添加</span><br>shift   <span class="hljs-comment">// 在头部删除</span><br>sort    <span class="hljs-comment">// 字母排序</span><br>reverse <span class="hljs-comment">// 反转</span><br>splice  <span class="hljs-comment">// 从指定索引删除若干元素，在从该位置添加若干元素</span><br>concat  <span class="hljs-comment">// 拼接,返回新Array</span><br>join    <span class="hljs-comment">// 使用指定字符拼接数组元素 ==&gt; String</span><br></code></pre></td></tr></table></figure>

<h3 id="Map-键值对结构，大数据量时具有极快的查找速度"><a href="#Map-键值对结构，大数据量时具有极快的查找速度" class="headerlink" title="Map 键值对结构，大数据量时具有极快的查找速度"></a>Map 键值对结构，大数据量时具有极快的查找速度</h3><p>根据key值迅速获取对应value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-number">95</span>], [<span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-number">75</span>], [<span class="hljs-string">&#x27;Tracy&#x27;</span>, <span class="hljs-number">85</span>]]);<br>m.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Michael&#x27;</span>); <span class="hljs-comment">// 95</span><br>m.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-number">67</span>); <span class="hljs-comment">// 添加新的key-value</span><br>m.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-number">59</span>);<br>m.<span class="hljs-title function_">has</span>(<span class="hljs-string">&#x27;Adam&#x27;</span>); <span class="hljs-comment">// 是否存在key &#x27;Adam&#x27;: true</span><br>m.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Adam&#x27;</span>); <span class="hljs-comment">// 67</span><br>m.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;Adam&#x27;</span>); <span class="hljs-comment">// 删除key &#x27;Adam&#x27;</span><br>m.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;Adam&#x27;</span>); <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure>

<h3 id="Set-只有非重复key，没有value值"><a href="#Set-只有非重复key，没有value值" class="headerlink" title="Set 只有非重复key，没有value值"></a>Set 只有非重复key，没有value值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;3&#x27;</span>]);<br>s; <span class="hljs-comment">// Set &#123;1, 2, 3, &quot;3&quot;&#125;</span><br><span class="hljs-comment">// 添加元素</span><br>s.<span class="hljs-title function_">add</span>(<span class="hljs-number">4</span>);<br>s; <span class="hljs-comment">// &#123;1, 2, 3, 4&#125;</span><br><span class="hljs-comment">// 删除元素</span><br>s.<span class="hljs-title function_">delete</span>(<span class="hljs-number">3</span>);<br></code></pre></td></tr></table></figure>

<h3 id="iterable类型"><a href="#iterable类型" class="headerlink" title="iterable类型"></a>iterable类型</h3><p>包括Array、Map、Set等；<br> for。。。in<br> 循环对象的属性名称key；一个Array数组实际上也是一个对象，它的每个元素的索引被视为一个属性。<br> for。。。of<br> 循环对象键值对中的value；更适合遍历没有key的集合，如Set；<br> forEach方法   （更好）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js">a.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">element, index, array</span>) &#123;<br>    <span class="hljs-comment">// element: 指向当前元素的值</span><br>    <span class="hljs-comment">// index: 指向当前索引</span><br>    <span class="hljs-comment">// array: 指向Array对象本身</span><br>    <span class="hljs-title function_">alert</span>(element);<br>&#125;);<br><br><span class="hljs-comment">// Set与Array类似，但Set没有索引，因此回调函数的前两个参数都是元素本身：</span><br><span class="hljs-comment">// Map的回调函数参数依次为value、key和map本身：</span><br></code></pre></td></tr></table></figure>

<h3 id="函数arguments参数"><a href="#函数arguments参数" class="headerlink" title="函数arguments参数"></a>函数arguments参数</h3><p>它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。arguments类似Array但它不是一个Array：<br> 利用arguments，你可以获得调用者传入的所有参数。即使函数不定义任何参数，还是可以拿到参数的值</p>
<p>当传入参数个数超过函数定义的参数个数，则将多余参数传入rest参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// rest参数只能写在最后，前面用...标识</span><br><span class="hljs-comment">// 传入的参数先绑定a、b，多余的参数以数组形式交给变量rest</span><br><span class="hljs-comment">// 所以，不再需要arguments我们就获取了全部参数。</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">a, b, ...rest</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;a = &#x27;</span> + a);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;b = &#x27;</span> + b);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest);<br>&#125;<br><br><span class="hljs-title function_">foo</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br><span class="hljs-comment">// 结果:</span><br><span class="hljs-comment">// a = 1</span><br><span class="hljs-comment">// b = 2</span><br><span class="hljs-comment">// Array [ 3, 4, 5 ]</span><br><br><span class="hljs-title function_">foo</span>(<span class="hljs-number">1</span>);<br><span class="hljs-comment">// 结果:</span><br><span class="hljs-comment">// a = 1</span><br><span class="hljs-comment">// b = undefined</span><br><span class="hljs-comment">// Array []</span><br></code></pre></td></tr></table></figure>

<h3 id="全局对象-window"><a href="#全局对象-window" class="headerlink" title="全局对象 window"></a>全局对象 window</h3><p>全局作用域的变量实际绑定到window的一个属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-keyword">var</span> course = <span class="hljs-string">&#x27;Learn JavaScript&#x27;</span>;<br><span class="hljs-title function_">alert</span>(course); <span class="hljs-comment">// &#x27;Learn JavaScript&#x27;</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">course</span>); <span class="hljs-comment">// &#x27;Learn JavaScript&#x27;</span><br><br><span class="hljs-comment">// 全局变量course 等同于 window.course</span><br><span class="hljs-comment">// alert函数也是window的一个变量</span><br></code></pre></td></tr></table></figure>

<p>减少全局变量的冲突：声明一个唯一的全局变量{}；然后把所有变量和函数都绑定到这个唯一一个全局变量上。</p>
<h3 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h3><p>for循环中，var i可以在循环块外部被引用；ES6的let i则解决了这个问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">100</span>; i++) &#123;<br>        <span class="hljs-comment">//</span><br>    &#125;<br>    i += <span class="hljs-number">100</span>;      <span class="hljs-comment">// 仍然可以引用变量i</span><br>&#125;<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">100</span>; i++) &#123;<br>        sum += i;<br>    &#125;<br>    i += <span class="hljs-number">1</span>;       <span class="hljs-comment">// SyntaxError</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="this丢失问题"><a href="#this丢失问题" class="headerlink" title="this丢失问题"></a>this丢失问题</h3><p>对象方法中的this，必须由对象进行调用该方法才能获取this；<br> 对象方法中的函数，this指向全局对象window；<br> 解决方法1：  that</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 保存当前this  ===&gt; that</span><br><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-keyword">var</span> xiaoming = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;小明&#x27;</span>,<br>    <span class="hljs-attr">birth</span>: <span class="hljs-number">1990</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// 在方法内部一开始就捕获this</span><br>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">getAgeFromBirth</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">var</span> y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>();<br>            <span class="hljs-keyword">return</span> y - that.<span class="hljs-property">birth</span>; <span class="hljs-comment">// 用that而不是this</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getAgeFromBirth</span>();<br>    &#125;<br>&#125;;<br><br>xiaoming.<span class="hljs-title function_">age</span>(); <span class="hljs-comment">// 25</span><br></code></pre></td></tr></table></figure>

<p>解决方法2：  apply与call</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用apply或call，控制函数的this指向传入的首个参数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> y = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>();<br>    <span class="hljs-keyword">return</span> y - <span class="hljs-variable language_">this</span>.<span class="hljs-property">birth</span>;<br>&#125;<br><br><span class="hljs-keyword">var</span> xiaoming = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;小明&#x27;</span>,<br>    <span class="hljs-attr">birth</span>: <span class="hljs-number">1990</span>,<br>    <span class="hljs-attr">age</span>: getAge<br>&#125;;<br><br>xiaoming.<span class="hljs-title function_">age</span>(); <span class="hljs-comment">// 25</span><br><br><span class="hljs-comment">// apply()把参数打包成Array再传入；</span><br>getAge.<span class="hljs-title function_">apply</span>(xiaoming, []); <span class="hljs-comment">// 25, this指向xiaoming, 参数为空</span><br><span class="hljs-comment">// 把参数按顺序传入。</span><br>getAge.<span class="hljs-title function_">call</span>(xiaoming)<br></code></pre></td></tr></table></figure>

<p>解决方法3： IFEE思想，bind(this)</p>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">函数参数`指向`函数<br></code></pre></td></tr></table></figure>

<h4 id="map逐一映射"><a href="#map逐一映射" class="headerlink" title="map逐一映射"></a>map逐一映射</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// *****</span><br><span class="hljs-comment">// “把f(x)作用在Array的每一个元素并把结果生成一个新的Array”。</span><br><span class="hljs-comment">// *****</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">pow</span>(<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;<br><br><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>];<br>arr.<span class="hljs-title function_">map</span>(pow); <span class="hljs-comment">// [1, 4, 9, 16, 25, 36, 49, 64, 81]</span><br></code></pre></td></tr></table></figure>

<h4 id="reduce瀑布映射"><a href="#reduce瀑布映射" class="headerlink" title="reduce瀑布映射"></a>reduce瀑布映射</h4><p>原理：[x1, x2, x3, x4].reduce(f) &#x3D; f(f(f(x1, x2), x3), x4)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// *****</span><br><span class="hljs-comment">// 把结果继续和序列的下一个元素做累积计算</span><br><span class="hljs-comment">// *****</span><br><br><span class="hljs-comment">// [1, 3, 5, 7, 9]变换成整数13579，reduce()也能派上用场：</span><br><br><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>];<br>arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) &#123;<br>    <span class="hljs-keyword">return</span> x * <span class="hljs-number">10</span> + y;<br>&#125;); <span class="hljs-comment">// 13579</span><br></code></pre></td></tr></table></figure>

<h4 id="filter过滤"><a href="#filter过滤" class="headerlink" title="filter过滤"></a>filter过滤</h4><p>filter()把传入的函数依次作用于每个元素，然后根据返回值是true还是false决定保留还是丢弃该元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 利用filter，可以巧妙地去除Array的重复元素：</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">&#x27;use strict&#x27;</span>;<br><br><span class="hljs-keyword">var</span> r,<br>    arr = [<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;strawberry&#x27;</span>, <span class="hljs-string">&#x27;banana&#x27;</span>, <span class="hljs-string">&#x27;pear&#x27;</span>, <span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;orange&#x27;</span>, <span class="hljs-string">&#x27;strawberry&#x27;</span>];<br><br>r = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">element, index, self</span>) &#123;<br>    <span class="hljs-comment">// indexOf总是返回第一个元素的位置，后续的重复元素位置与indexOf返回的位置不相等，被过滤</span><br>    <span class="hljs-keyword">return</span> self.<span class="hljs-title function_">indexOf</span>(element) === index;<br>&#125;);<br><br><span class="hljs-title function_">alert</span>(r.<span class="hljs-title function_">toString</span>());<br></code></pre></td></tr></table></figure>

<h3 id="sort-排序"><a href="#sort-排序" class="headerlink" title="sort 排序"></a>sort 排序</h3><p><code>sort()方法会直接对Array进行修改，它返回的结果仍是当前Array：</code><br> 默认把所有元素先转换为String再排序，字符串根据首个字符的ASCII码进行排序<br> sort的自定义排序中，return -1不对调；return 1对调；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 升序排列</span><br><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br>arr.<span class="hljs-title function_">sort</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">x, y</span>) &#123;<br>    <span class="hljs-keyword">if</span> (x &lt; y) &#123;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (x &gt; y) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;); <span class="hljs-comment">// [1, 2, 10, 20]</span><br></code></pre></td></tr></table></figure>

<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">x =&gt; x * x   <br><br>等同于  <br><br><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>箭头函数相当于匿名函数<br> 格式一，只包含一个表达式，可以省略{ … }和return<br> 格式二，包含多条语句，不能省略{ … }和return：</p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 两个参数:</span><br>(x, y) =&gt; x * x + y * y<br><br><span class="hljs-comment">// 无参数:</span><br>() =&gt; <span class="hljs-number">3.14</span><br><br><span class="hljs-comment">// 可变参数:</span><br>(x, y, ...rest) =&gt; &#123;<br>    <span class="hljs-keyword">var</span> i, sum = x + y;<br>    <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;rest.<span class="hljs-property">length</span>; i++) &#123;<br>        sum += rest[i];<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="返回对象"><a href="#返回对象" class="headerlink" title="返回对象"></a>返回对象</h4><p>返回对象时存在语法冲突{} 所以改为({foo:x})</p>
<h4 id="this作用域"><a href="#this作用域" class="headerlink" title="this作用域"></a>this作用域</h4><p>箭头函数修复了this的指向，this总是指向词法作用域，也就是外层调用者obj：<br> 也就是说，在对象（第一层）的方法（第二层）的函数（第三层）中，仍然可以用this调用到对象的属性值；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj = &#123;<br>    <span class="hljs-attr">birth</span>: <span class="hljs-number">1990</span>,<br>    <span class="hljs-attr">getAge</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> b = <span class="hljs-variable language_">this</span>.<span class="hljs-property">birth</span>; <span class="hljs-comment">// 1990</span><br>        <span class="hljs-keyword">var</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getFullYear</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">birth</span>;    <span class="hljs-comment">//this指向obj对象</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>();<br>    &#125;<br>&#125;;<br>obj.<span class="hljs-title function_">getAge</span>(); <span class="hljs-comment">// 25</span><br></code></pre></td></tr></table></figure>

<h4 id="call-与apply"><a href="#call-与apply" class="headerlink" title="call()与apply()"></a>call()与apply()</h4><p>由于this在箭头函数中已经按照词法作用域绑定了，所以，用call()或者apply()调用箭头函数时，无法对this进行绑定，即传入的第一个参数被忽略，直接传入参数即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj = &#123;<br>    <span class="hljs-attr">birth</span>: <span class="hljs-number">1990</span>,<br>    <span class="hljs-attr">getAge</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">year</span>) &#123;<br>        <span class="hljs-keyword">var</span> b = <span class="hljs-variable language_">this</span>.<span class="hljs-property">birth</span>; <span class="hljs-comment">// 1990</span><br>        <span class="hljs-keyword">var</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params">y</span>) =&gt; y - <span class="hljs-variable language_">this</span>.<span class="hljs-property">birth</span>; <span class="hljs-comment">// this.birth仍是1990</span><br>        <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">call</span>(&#123;<span class="hljs-attr">birth</span>:<span class="hljs-number">2000</span>&#125;, year);<br>        <span class="hljs-comment">// 原本需要写作fn.call(this, &#123;birth:2000&#125;, year)</span><br>    &#125;<br>&#125;;<br>obj.<span class="hljs-title function_">getAge</span>(<span class="hljs-number">2015</span>); <span class="hljs-comment">// 25</span><br></code></pre></td></tr></table></figure>

<h3 id="generator生成器"><a href="#generator生成器" class="headerlink" title="generator生成器"></a>generator生成器</h3><p>yield 用于return之前的多次返回<br> generator</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 定义</span><br><span class="hljs-keyword">function</span>* <span class="hljs-title function_">foo</span>(<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">yield</span> x + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">yield</span> x + <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">return</span> x + <span class="hljs-number">3</span>;<br>&#125;<br><br><span class="hljs-comment">// 创建generator对象   与函数调用不同，不能直接调用</span><br><span class="hljs-keyword">var</span> f = <span class="hljs-title function_">foo</span>(<span class="hljs-number">3</span>);    <span class="hljs-comment">// &#123;[[GeneratorStatus]]: &quot;suspended&quot;&#125;</span><br><br><span class="hljs-comment">// 实际获取返回值   done属性表示执行完毕</span><br>f.<span class="hljs-title function_">next</span>();    <span class="hljs-comment">// &#123;value: 4, done: false&#125;</span><br>f.<span class="hljs-title function_">next</span>();    <span class="hljs-comment">// &#123;value: 5, done: false&#125;</span><br>f.<span class="hljs-title function_">next</span>();    <span class="hljs-comment">// &#123;value: 6, done: true&#125;</span><br>f.<span class="hljs-title function_">next</span>();    <span class="hljs-comment">// &#123;value: undefined, done: true&#125;</span><br><br><br><span class="hljs-comment">// 直接用for ... of循环迭代generator对象，这种方式不需要我们自己判断done</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x <span class="hljs-keyword">of</span> <span class="hljs-title function_">f</span>(<span class="hljs-number">3</span>)) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x); <span class="hljs-comment">// 依次输出4,5,6</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>generator的优点：<br> 1.因为generator可以在执行过程中多次返回，所以它看上去就像一个可以记住执行状态的函数，利用这一点，写一个generator就可以实现需要用面向对象才能实现的功能。</p>
<p>2.把异步回调代码变成形似同步代码（主要是美观，实际仍未异步）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 原来的ajax写法</span><br><span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-1&#x27;</span>, data1, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) &#123;<br>    <span class="hljs-keyword">if</span> (err) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(err);<br>    &#125;<br>    <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-2&#x27;</span>, data2, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) &#123;<br>        <span class="hljs-keyword">if</span> (err) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(err);<br>        &#125;<br>        <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-3&#x27;</span>, data3, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) &#123;<br>            <span class="hljs-keyword">if</span> (err) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-title function_">handle</span>(err);<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">success</span>(result);<br>        &#125;);<br>    &#125;);<br>&#125;);<br><br><span class="hljs-comment">// 使用generator美化之后</span><br><span class="hljs-keyword">try</span> &#123;<br>    r1 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-1&#x27;</span>, data1);<br>    r2 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-2&#x27;</span>, data2);<br>    r3 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;http://url-3&#x27;</span>, data3);<br>    <span class="hljs-title function_">success</span>(r3);<br>&#125;<br><span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-title function_">handle</span>(err);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 标准对象typeof 123; // &#x27;number&#x27;typeof NaN; // &#x27;number&#x27;typeof &#x27;str&#x27;; // &#x27;string&#x27;typeof true; // &#x27;boolean&#x27;typeof undefined; // &#x27;undefined&#x27;typeof Math.abs; // &#x27;function&#x27;typeof null; // &#x27;object&#x27;typeof []; // &#x27;object&#x27;typeof &#123;&#125;; // &#x27;object&#x27;// 包装对象  拆包前是Object；解包后是普通数据类型var n = new Number(123); // 123,生成了新的包装类型var b = new Boolean(true); // true,生成了新的包装类型var s = new String(&#x27;str&#x27;); // &#x27;str&#x27;,生成了新的包装类型</span><br></code></pre></td></tr></table></figure>

<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>regExp.test(str);   返回值：false&#x2F;trues<br> 用途：</p>
<ol>
<li>切割字符串</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-string">&#x27;a,b;; c  d&#x27;</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\s\,\;]+/</span>); <span class="hljs-comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]</span><br></code></pre></td></tr></table></figure>

<ol>
<li>分组，提取子串</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> re = <span class="hljs-regexp">/^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$/</span>;<br>re.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;010-12345&#x27;</span>); <span class="hljs-comment">// [&#x27;010-12345&#x27;, &#x27;010&#x27;, &#x27;12345&#x27;]</span><br>re.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;010 12345&#x27;</span>); <span class="hljs-comment">// null</span><br></code></pre></td></tr></table></figure>

<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><h4 id="字符串化-stringify"><a href="#字符串化-stringify" class="headerlink" title="字符串化 stringify"></a>字符串化 stringify</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> xiaoming = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;小明&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">14</span>,<br>    <span class="hljs-attr">gender</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">height</span>: <span class="hljs-number">1.65</span>,<br>    <span class="hljs-attr">grade</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-string">&#x27;middle-school&#x27;</span>: <span class="hljs-string">&#x27;\&quot;W3C\&quot; Middle School&#x27;</span>,<br>    <span class="hljs-attr">skills</span>: [<span class="hljs-string">&#x27;JavaScript&#x27;</span>, <span class="hljs-string">&#x27;Java&#x27;</span>, <span class="hljs-string">&#x27;Python&#x27;</span>, <span class="hljs-string">&#x27;Lisp&#x27;</span>]<br>&#125;;<br><br><span class="hljs-comment">// 原始字符串显示</span><br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xiaoming);<br><br><span class="hljs-comment">// 缩进显示 </span><br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xiaoming, <span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;  &#x27;</span>);<br><br><span class="hljs-comment">// 传入Array，输出指定的属性</span><br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xiaoming, [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;skills&#x27;</span>], <span class="hljs-string">&#x27;  &#x27;</span>);<br><br><span class="hljs-comment">// 传入一个函数，处理对象的每个键值</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params">key, value</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">toUpperCase</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> value;<br>&#125;<br><br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xiaoming, convert, <span class="hljs-string">&#x27;  &#x27;</span>);<br><br><span class="hljs-comment">// JSON数据添加toJSON属性，控制JSON应该序列化的数据</span><br><span class="hljs-attr">toJSON</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123; <span class="hljs-comment">// 只输出name和age，并且改变了key：</span><br>            <span class="hljs-string">&#x27;Name&#x27;</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>,<br>            <span class="hljs-string">&#x27;Age&#x27;</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span><br>        &#125;;<br>    &#125;<br><br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(xiaoming); <span class="hljs-comment">// &#x27;&#123;&quot;Name&quot;:&quot;小明&quot;,&quot;Age&quot;:14&#125;&#x27;</span><br></code></pre></td></tr></table></figure>

<h4 id="反序列化-JSON-parse"><a href="#反序列化-JSON-parse" class="headerlink" title="反序列化 JSON.parse"></a>反序列化 JSON.parse</h4><p>JSON.parse()还可以接收一个函数，用来转换解析出的属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&#x27;&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:14&#125;&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">key, value</span>) &#123;<br>    <span class="hljs-comment">// 把number * 2:</span><br>    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">&#x27;name&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> value + <span class="hljs-string">&#x27;同学&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> value;<br>&#125;); <span class="hljs-comment">// Object &#123;name: &#x27;小明同学&#x27;, age: 14&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>构造函数与普通函数的声明几乎没有区别。<br> 但是必须通过new来调用构造函数，它绑定的this指向新创建的对象，并默认返回this，也就是说，不需要在最后写return this;<br> 如果不写new，这就是一个普通函数，它返回undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 生成的每个实例都会有独立的name属性与hello属性；hello的函数代码重复，浪费内存空间</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hello</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;!&#x27;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//  把hello函数放在prototype下，可以让不同的实例共享同个函数，节省内存空间</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-title class_">Student</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hello</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;!&#x27;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>

<h3 id="原型继承-其实ES6的class优化更容易理解、好用"><a href="#原型继承-其实ES6的class优化更容易理解、好用" class="headerlink" title="原型继承(其实ES6的class优化更容易理解、好用)"></a>原型继承(其实ES6的class优化更容易理解、好用)</h3><p><strong>重点理解！！！prototype指向的是一个对象，而不是prototype指向prototype属性</strong></p>
<p><code>new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Object.prototype ----&gt; null</code><br> 必须想办法把原型链修改为：<br> <code>new PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; Student.prototype ----&gt; Object.prototype ----&gt; null</code><br> 不能直接改变指向；<br> 必须借助一个中间对象来实现正确的原型链，这个中间对象的原型要指向Student.prototype，中间对象可以用一个空函数F来实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// PrimaryStudent构造函数:</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">PrimaryStudent</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-comment">// 调用了Student构造函数，绑定this变量</span><br>    <span class="hljs-comment">// 但是PrimaryStudent的prototype并不指向Student；这并不是继承</span><br>    <span class="hljs-title class_">Student</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, props);    <br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span> = props.<span class="hljs-property">grade</span> || <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 空函数F:</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params"></span>) &#123;<br>&#125;<br><br><span class="hljs-comment">// 把F的原型指向Student.prototype:</span><br>F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Student</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;<br><br><span class="hljs-comment">// 把PrimaryStudent的原型指向一个新的F对象，F对象的原型正好指向Student.prototype:</span><br><span class="hljs-title class_">PrimaryStudent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();<br><br><span class="hljs-comment">// 把PrimaryStudent原型的构造函数修复为PrimaryStudent:</span><br><span class="hljs-title class_">PrimaryStudent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">PrimaryStudent</span>;<br><br><span class="hljs-comment">// 继续在PrimaryStudent原型（就是new F()对象）上定义方法：</span><br><span class="hljs-title class_">PrimaryStudent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getGrade</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span>;<br>&#125;;<br><br><span class="hljs-comment">// 创建xiaoming:</span><br><span class="hljs-keyword">var</span> xiaoming = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrimaryStudent</span>(&#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;小明&#x27;</span>,<br>    <span class="hljs-attr">grade</span>: <span class="hljs-number">2</span><br>&#125;);<br>xiaoming.<span class="hljs-property">name</span>; <span class="hljs-comment">// &#x27;小明&#x27;</span><br>xiaoming.<span class="hljs-property">grade</span>; <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// 验证原型:</span><br>xiaoming.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">PrimaryStudent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span><br>xiaoming.<span class="hljs-property">__proto__</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Student</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>; <span class="hljs-comment">// true</span><br><br><span class="hljs-comment">// 验证继承关系:</span><br>xiaoming <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">PrimaryStudent</span>; <span class="hljs-comment">// true</span><br>xiaoming <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Student</span>; <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 封装空函数继承过程</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">inherits</span>(<span class="hljs-params">Child, Parent</span>) &#123;<br>    <span class="hljs-keyword">var</span> F = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;;<br>    F.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;<br>    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">F</span>();<br>    <span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>;<br>&#125;<br><br><span class="hljs-comment">// 实现原型继承链:</span><br><span class="hljs-title function_">inherits</span>(<span class="hljs-title class_">PrimaryStudent</span>, <span class="hljs-title class_">Student</span>);<br></code></pre></td></tr></table></figure>

<h3 id="class继承-原型继承的优化"><a href="#class继承-原型继承的优化" class="headerlink" title="class继承 &#x3D;&#x3D;&#x3D;&gt; 原型继承的优化"></a>class继承 &#x3D;&#x3D;&#x3D;&gt; 原型继承的优化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用构造函数</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-title class_">Student</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hello</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;!&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">// 使用class实现</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-title function_">hello</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;!&#x27;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 实例化</span><br><span class="hljs-keyword">var</span> xiaoming = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&#x27;小明&#x27;</span>);<br>xiaoming.<span class="hljs-title function_">hello</span>();<br></code></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 使用extends关键字实现继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PrimaryStudent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Student</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, grade</span>) &#123;<br>        <span class="hljs-variable language_">super</span>(name); <span class="hljs-comment">// 记得用super调用父类的构造方法!</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span> = grade;<br>    &#125;<br><br>    <span class="hljs-title function_">myGrade</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;I am at grade &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="浏览器对象"><a href="#浏览器对象" class="headerlink" title="浏览器对象"></a>浏览器对象</h3><h4 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h4><p>window对象不但充当全局作用域，而且表示浏览器窗口。</p>
<p>window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具栏、边框等占位元素后，用于显示网页的净宽高。</p>
<h4 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h4><p>navigator对象表示浏览器的信息，最常用的属性包括：</p>
<p>navigator.appName：浏览器名称；<br> navigator.appVersion：浏览器版本；<br> navigator.language：浏览器设置的语言；<br> navigator.platform：操作系统类型；<br> navigator.userAgent：浏览器设定的User-Agent字符串。</p>
<h4 id="screen对象"><a href="#screen对象" class="headerlink" title="screen对象"></a>screen对象</h4><p>screen对象表示屏幕的信息，常用的属性有：</p>
<p>screen.width：屏幕宽度，以像素为单位；<br> screen.height：屏幕高度，以像素为单位；<br> screen.colorDepth：返回颜色位数，如8、16、24。</p>
<h4 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h4><p>location对象表示当前页面的URL信息。例如，一个完整的URL：</p>
<p><a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.example.com:8080/path/index.html?a=1&b=2#TOP">http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</a><br> 可以用location.href获取。要获得URL各个部分的值，可以这么写：</p>
<p>location.protocol; &#x2F;&#x2F; ‘http’<br> location.host; &#x2F;&#x2F; ‘<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://www.example.com%27">www.example.com&#39;</a><br> location.port; &#x2F;&#x2F; ‘8080’<br> location.pathname; &#x2F;&#x2F; ‘&#x2F;path&#x2F;index.html’<br> location.search; &#x2F;&#x2F; ‘?a&#x3D;1&amp;b&#x3D;2’<br> location.hash; &#x2F;&#x2F; ‘TOP’</p>
<p>要加载一个新页面：location.assign()<br> 重新加载当前页面，location.reload()</p>
<h4 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h4><p>document对象表示当前页面。由于HTML在浏览器中以DOM形式表示为树形结构，document对象就是整个DOM树的根节点。</p>
<p>document对象还有一个cookie属性，可以获取当前页面的Cookie。</p>
<p>Cookie是由服务器发送的key-value标示符。因为HTTP协议是无状态的，但是服务器要区分到底是哪个用户发过来的请求，就可以用Cookie来区分。当一个用户成功登录后，服务器发送一个Cookie给浏览器，例如user&#x3D;ABC123XYZ(加密的字符串)…，此后，浏览器访问该网站时，会在请求头附上这个Cookie，服务器根据Cookie即可区分出用户。</p>
<p>Cookie还可以存储网站的一些设置，例如，页面显示的语言等等。</p>
<p>JavaScript可以通过document.cookie读取到当前页面的Cookie：</p>
<blockquote>
</blockquote>
<p>为了解决这个问题，服务器在设置Cookie时可以使用httpOnly，设定了httpOnly的Cookie将不能被JavaScript读取。这个行为由浏览器实现，主流浏览器均支持httpOnly选项，IE从IE6 SP1开始支持。<br> 为了确保安全，服务器端在设置Cookie时，应该始终坚持使用httpOnly。<br> 效果&#x3D;&#x3D;&gt; 保证浏览器的document对象中就看不到cookie，不能通过客户端脚本访问；只能通过服务器端的http请求</p>
<h3 id="DOM更新、插入、删除"><a href="#DOM更新、插入、删除" class="headerlink" title="DOM更新、插入、删除"></a>DOM更新、插入、删除</h3><h4 id="修改节点"><a href="#修改节点" class="headerlink" title="修改节点"></a>修改节点</h4><p>innerHTML： 以HTML的形式插入代码段，可更新节点的结构；<br> innerTEXT： 以字符串的形式插入到节点，内含的html标签失效；<br> <code>element.style.color = &#39;red&#39;;</code>   通过DOM节点的style属性修改css</p>
<h4 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h4><p><code>document.createElement(&#39;p&#39;); element.appendChild(newElement)</code>   如果新节点已存在，不是简单在尾部添加，而是剪切该元素到目标位置；如果是一直创建新标签，则一直重复插入；<br> <code>document.createElement(&#39;p&#39;); element.insertBefore(newElement, referenceElement);</code>    如果新节点已存在，就不是简单在节点前添加，而是剪切该元素到目标位置；同append；</p>
<h4 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">找到目标删除节点，寻至父节点，删除子节点； 被删除的节点仍然保存在内存中，可以再次插入 <br><span class="hljs-comment">// 拿到待删除节点:</span><br><span class="hljs-keyword">var</span> self = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;to-be-removed&#x27;</span>);<br><span class="hljs-comment">// 拿到父节点:</span><br><span class="hljs-keyword">var</span> parent = self.<span class="hljs-property">parentElement</span>;<br><span class="hljs-comment">// 删除:</span><br><span class="hljs-keyword">var</span> removed = parent.<span class="hljs-title function_">removeChild</span>(self);<br>removed === self; <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>

<h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><p>使用onsubmit 与type&#x3D;”submit”进行提交表单；使用click会扰乱form的正常提交</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- HTML --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;test-form&quot;</span> <span class="hljs-attr">onsubmit</span>=<span class="hljs-string">&quot;return checkForm()&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;test&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkForm</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> form = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-form&#x27;</span>);</span><br><span class="language-javascript">    <span class="hljs-comment">// 可以在此修改form的input...</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 继续下一步:</span></span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">// return true来告诉浏览器继续提交</span></span><br><span class="language-javascript">    <span class="hljs-comment">// return false，浏览器将不会继续提交form，这种情况通常对应用户输入有误，提示用户错误信息后终止提交form。</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="HTML5中的File-API允许JS读取文件内容"><a href="#HTML5中的File-API允许JS读取文件内容" class="headerlink" title="HTML5中的File API允许JS读取文件内容"></a>HTML5中的File API允许JS读取文件内容</h3><p>html5提供了 <code>File</code> 与 <code>FileReader</code> 两个主要对象，可以获得文件信息并读取文件。<br> File读取文件属性信息； FileReader读取文件内部数据（比如图片的base64）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// fileInput：选择文件的按钮； info：读取的文件属性信息；  preview：页面中的预览框  </span><br><span class="hljs-keyword">var</span> fileInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-image-file&#x27;</span>),<br>    info = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-file-info&#x27;</span>),<br>    preview = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-image-preview&#x27;</span>);<br><span class="hljs-comment">// 监听change事件:</span><br>fileInput.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;change&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 清除背景图片:</span><br>    preview.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundImage</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    <span class="hljs-comment">// 检查文件是否选择:</span><br>    <span class="hljs-keyword">if</span> (!fileInput.<span class="hljs-property">value</span>) &#123;<br>        info.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;没有选择文件&#x27;</span>;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// 获取File引用:</span><br>    <span class="hljs-keyword">var</span> file = fileInput.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-comment">// 获取File信息:</span><br>    info.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;文件: &#x27;</span> + file.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span> +<br>                     <span class="hljs-string">&#x27;大小: &#x27;</span> + file.<span class="hljs-property">size</span> + <span class="hljs-string">&#x27;&lt;br&gt;&#x27;</span> +<br>                     <span class="hljs-string">&#x27;修改: &#x27;</span> + file.<span class="hljs-property">lastModifiedDate</span>;<br>    <span class="hljs-keyword">if</span> (file.<span class="hljs-property">type</span> !== <span class="hljs-string">&#x27;image/jpeg&#x27;</span> &amp;&amp; file.<span class="hljs-property">type</span> !== <span class="hljs-string">&#x27;image/png&#x27;</span> &amp;&amp; file.<span class="hljs-property">type</span> !== <span class="hljs-string">&#x27;image/gif&#x27;</span>) &#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;不是有效的图片文件!&#x27;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// 读取文件:</span><br>    <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();<br>    reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>        <span class="hljs-keyword">var</span><br>            data = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>; <span class="hljs-comment">// &#x27;data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...&#x27;            </span><br>        preview.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundImage</span> = <span class="hljs-string">&#x27;url(&#x27;</span> + data + <span class="hljs-string">&#x27;)&#x27;</span>;<br>    &#125;;<br>    <span class="hljs-comment">// 以DataURL的形式读取文件:</span><br>    reader.<span class="hljs-title function_">readAsDataURL</span>(file);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>在现代浏览器上写AJAX主要依靠XMLHttpRequest对象<br> 根据状态码判断响应进度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 原生AJAX的写法</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">success</span>(<span class="hljs-params">text</span>) &#123;<br>    <span class="hljs-keyword">var</span> textarea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-response-text&#x27;</span>);<br>    textarea.<span class="hljs-property">value</span> = text;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fail</span>(<span class="hljs-params">code</span>) &#123;<br>    <span class="hljs-keyword">var</span> textarea = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-response-text&#x27;</span>);<br>    textarea.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;Error code: &#x27;</span> + code;<br>&#125;<br><br><span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>(); <span class="hljs-comment">// 新建XMLHttpRequest对象</span><br><br><span class="hljs-comment">// 定义request的响应回调函数</span><br>request.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// 状态发生变化时，函数被回调</span><br>    <span class="hljs-keyword">if</span> (request.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) &#123; <span class="hljs-comment">// 成功完成</span><br>        <span class="hljs-comment">// 判断响应结果:</span><br>        <span class="hljs-keyword">if</span> (request.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) &#123;<br>            <span class="hljs-comment">// 成功，通过responseText拿到响应的文本:</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">success</span>(request.<span class="hljs-property">responseText</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// 失败，根据响应码判断失败原因:</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-title function_">fail</span>(request.<span class="hljs-property">status</span>);<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// HTTP请求还在继续...</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 发送请求:</span><br>request.<span class="hljs-title function_">open</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;/api/categories&#x27;</span>);<br>request.<span class="hljs-title function_">send</span>();<br><br><span class="hljs-comment">// XMLHttpRequest对象的open()方法有3个参数，第一个参数指定是GET还是POST，第二个参数指定URL地址，第三个参数指定是否使用异步，默认是true，所以不用写。</span><br><span class="hljs-comment">// 最后调用send()方法才是真正发送请求。</span><br><span class="hljs-comment">// GET请求不需要参数，POST请求需要把body部分以字符串或者FormData对象传进去。</span><br><br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;请求已发送，请等待响应...&#x27;</span>);<br><br><span class="hljs-comment">// 使用Promise的简化写法</span><br><span class="hljs-comment">// ajax函数将返回Promise对象:</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">method, url, data</span>) &#123;<br>    <span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>        request.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">if</span> (request.<span class="hljs-property">readyState</span> === <span class="hljs-number">4</span>) &#123;<br>                <span class="hljs-keyword">if</span> (request.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) &#123;<br>                    <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">responseText</span>);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">status</span>);<br>                &#125;<br>            &#125;<br>        &#125;;<br>        request.<span class="hljs-title function_">open</span>(method, url);<br>        request.<span class="hljs-title function_">send</span>(data);<br>    &#125;);<br>&#125;<br><br><span class="hljs-keyword">var</span> p = <span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;/api/categories&#x27;</span>);<br>p.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">text</span>) &#123; <span class="hljs-comment">// 如果AJAX成功，获得响应内容</span><br>    log.<span class="hljs-property">innerText</span> = text;<br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">status</span>) &#123; <span class="hljs-comment">// 如果AJAX失败，获得响应代码</span><br>    log.<span class="hljs-property">innerText</span> = <span class="hljs-string">&#x27;ERROR: &#x27;</span> + status;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="跨域请求"><a href="#跨域请求" class="headerlink" title="跨域请求"></a>跨域请求</h4><p>大多数浏览器只允许在js中请求域名、协议、端口相同的URL；因此存在跨域问题。<br> 解决方法：<br> 1.使用flash插件发送http请求；必须安装flash，不考虑。<br> 2.在同源域名下架设一个代理服务器来转发，JavaScript负责把请求发送到代理服务器，代理服务器再把结果返回，这样就遵守了浏览器的同源策略。这种方式麻烦之处在于需要服务器端额外做开发。<br> 3.JSONP，但只能用GET请求，并且要求返回JavaScript。这种方式跨域实际上是利用了浏览器允许跨域引用JavaScript资源；通常以函数调用的形式返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">以<span class="hljs-number">163</span>的股票查询<span class="hljs-variable constant_">URL</span>为例，对于<span class="hljs-variable constant_">URL</span>：<span class="hljs-attr">http</span>:<span class="hljs-comment">//api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice，你将得到如下返回(一个带参的函数调用)：</span><br><br><span class="hljs-title function_">refreshPrice</span>(&#123;<span class="hljs-string">&quot;0000001&quot;</span>:&#123;<span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;0000001&quot;</span>, ... &#125;);<br>因此我们需要首先在页面中准备好回调函数：<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">refreshPrice</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-keyword">var</span> p = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;test-jsonp&#x27;</span>);<br>    p.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&#x27;当前价格：&#x27;</span> +<br>        data[<span class="hljs-string">&#x27;0000001&#x27;</span>].<span class="hljs-property">name</span> +<span class="hljs-string">&#x27;: &#x27;</span> + <br>        data[<span class="hljs-string">&#x27;0000001&#x27;</span>].<span class="hljs-property">price</span> + <span class="hljs-string">&#x27;；&#x27;</span> +<br>        data[<span class="hljs-string">&#x27;1399001&#x27;</span>].<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;: &#x27;</span> +<br>        data[<span class="hljs-string">&#x27;1399001&#x27;</span>].<span class="hljs-property">price</span>;<br>&#125;<br><br>最后用<span class="hljs-title function_">getPrice</span>()函数触发：通过新建script标签，访问<span class="hljs-variable constant_">API</span>，调用refreshPrice函数，使用自定义的refreshPrice渲染新数据<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPrice</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> js = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;script&#x27;</span>),<br>        head = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&#x27;head&#x27;</span>)[<span class="hljs-number">0</span>];<br>    js.<span class="hljs-property">src</span> = <span class="hljs-string">&#x27;http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice&#x27;</span>;<br>    head.<span class="hljs-title function_">appendChild</span>(js);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>4.CORS （Cross-Origin Resource Sharing）是HTML5规范定义的如何跨域访问资源。<br> 跨域能否成功，取决于对方服务器是否愿意给你设置一个正确的Access-Control-Allow-Origin，决定权始终在对方手中。</p>
<h3 id="Promise-承诺将来会执行"><a href="#Promise-承诺将来会执行" class="headerlink" title="Promise 承诺将来会执行"></a>Promise 承诺将来会执行</h3><p>效果： 把原本的一种回调细分为两种回调</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 变量p1是一个Promise对象，它负责执行test函数。test函数在内部是异步执行的</span><br><span class="hljs-comment">// 当test函数执行成功时，我们告诉Promise对象,如果成功，执行.then()</span><br><span class="hljs-comment">// 当test函数执行失败时，我们告诉Promise对象，如果失败，执行.catch()</span><br><span class="hljs-comment">// 通过test函数中的resolve与reject来判断函数执行成功与失败  </span><br><br><br><span class="hljs-comment">// 链式简写</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(test).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;成功：&#x27;</span> + result);<br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;失败：&#x27;</span> + reason);<br>&#125;);<br><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;start new Promise...&#x27;</span>);<br>    <span class="hljs-keyword">var</span> timeOut = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">2</span>;<br>    <span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set timeout to: &#x27;</span> + timeOut + <span class="hljs-string">&#x27; seconds.&#x27;</span>);<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> (timeOut &lt; <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;call resolve()...&#x27;</span>);<br>            <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;200 OK&#x27;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;call reject()...&#x27;</span>);<br>            <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;timeout in &#x27;</span> + timeOut + <span class="hljs-string">&#x27; seconds.&#x27;</span>);<br>        &#125;<br>    &#125;, timeOut * <span class="hljs-number">1000</span>);<br>&#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">r</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Done: &#x27;</span> + r);<br>&#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Failed: &#x27;</span> + reason);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="Promise串行执行异步任务"><a href="#Promise串行执行异步任务" class="headerlink" title="Promise串行执行异步任务"></a>Promise串行执行异步任务</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">job1.<span class="hljs-title function_">then</span>(job2).<span class="hljs-title function_">then</span>(job3).<span class="hljs-title function_">catch</span>(handleError);<br><br><span class="hljs-comment">// job1、2、3都是Promise对象</span><br></code></pre></td></tr></table></figure>

<h4 id="Promise-并行执行多个异步任务"><a href="#Promise-并行执行多个异步任务" class="headerlink" title="Promise 并行执行多个异步任务"></a>Promise 并行执行多个异步任务</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">500</span>, <span class="hljs-string">&#x27;P1&#x27;</span>);<br>&#125;);<br><span class="hljs-keyword">var</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">600</span>, <span class="hljs-string">&#x27;P2&#x27;</span>);<br>&#125;);<br><br><br><span class="hljs-comment">// 并行执行异步任务   Promise.all() 以数组形式返回数据</span><br><span class="hljs-comment">// 同时执行p1和p2，并在它们都完成后执行then:</span><br><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([p1, p2]).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">results</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results); <span class="hljs-comment">// 获得一个Array: [&#x27;P1&#x27;, &#x27;P2&#x27;]</span><br>&#125;);<br><br><br><span class="hljs-comment">// 多个异步任务竞争 ===&gt; 为了容错，只需要获得先返回的结果即可；后完成的任务仍在执行，但执行结果将被丢弃</span><br><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([p1, p2]).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// &#x27;P1&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h3><p><code>jQuery === $</code>  &#x2F;&#x2F; 本质上是function，而function也是对象，于是$可以直接调用，也有很多其他属性。</p>
<p>组合查找： <code>$(&#39;input[name=email]&#39;)</code><br> 多项选择： <code>$(&#39;p.red,p.green&#39;); // 把&lt;p class=&quot;red&quot;&gt;和&lt;p class=&quot;green&quot;&gt;都选出来</code></p>
<h4 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>.<span class="hljs-title function_">next</span>()  <span class="hljs-comment">// 可加参数，也可不加</span><br>.<span class="hljs-title function_">prev</span>()  <span class="hljs-comment">// 可加参数，也可不加</span><br></code></pre></td></tr></table></figure>

<h4 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 以下的[] 指若干DOM节点</span><br>[].<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;&#x27;</span>)  <span class="hljs-comment">// 过滤掉不符合过滤条件的</span><br>[].<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123; <br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;S&#x27;</span>) === <span class="hljs-number">0</span><br>        &#125;)   <span class="hljs-comment">// 仅保留S开头的节点</span><br>() =&gt; [].<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span>;<br>&#125;).<span class="hljs-title function_">get</span>();   <span class="hljs-comment">// 用get()拿到包含string的Array</span><br><br>[].<span class="hljs-title function_">first</span>()     <span class="hljs-comment">//获取若干DOM节点的首个节点</span><br>[].<span class="hljs-title function_">last</span>()      <span class="hljs-comment">//获取若干DOM节点的末尾节点</span><br>[].<span class="hljs-title function_">slice</span>()     <span class="hljs-comment">//截取若干DOM节点的若干节点</span><br></code></pre></td></tr></table></figure>

<h4 id="修改DOM-与-CSS-与-添加、删除DOM"><a href="#修改DOM-与-CSS-与-添加、删除DOM" class="headerlink" title="修改DOM 与 CSS 与 添加、删除DOM"></a>修改DOM 与 CSS 与 添加、删除DOM</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 获取 </span><br>$().<span class="hljs-title function_">text</span>()<br>$().<span class="hljs-title function_">html</span>()<br><br><span class="hljs-comment">// 修改</span><br>$().<span class="hljs-title function_">text</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br>$().<span class="hljs-title function_">html</span>(<span class="hljs-string">&#x27;&#x27;</span>)<br><br><span class="hljs-comment">// 修改css</span><br>$().<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;key&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>)<br><span class="hljs-keyword">var</span> div = $(<span class="hljs-string">&#x27;#test-div&#x27;</span>);<br>div.<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;color&#x27;</span>); <span class="hljs-comment">// 获取CSS属性</span><br>div.<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;color&#x27;</span>, <span class="hljs-string">&#x27;#336699&#x27;</span>); <span class="hljs-comment">// 设置CSS属性</span><br>div.<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;color&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// 清除CSS属性</span><br>div.<span class="hljs-title function_">hasClass</span>(<span class="hljs-string">&#x27;highlight&#x27;</span>); <span class="hljs-comment">// false， class是否包含highlight</span><br>div.<span class="hljs-title function_">addClass</span>(<span class="hljs-string">&#x27;highlight&#x27;</span>); <span class="hljs-comment">// 添加highlight这个class</span><br>div.<span class="hljs-title function_">removeClass</span>(<span class="hljs-string">&#x27;highlight&#x27;</span>); <span class="hljs-comment">// 删除highlight这个class</span><br><br><span class="hljs-comment">// 修改display属性</span><br>a.<span class="hljs-title function_">hide</span>(); <span class="hljs-comment">// 隐藏</span><br>a.<span class="hljs-title function_">show</span>(); <span class="hljs-comment">// 显示</span><br><br><span class="hljs-comment">// 获取DOM信息</span><br><span class="hljs-comment">// 浏览器可视窗口大小:</span><br>$(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">width</span>(); <span class="hljs-comment">// 800</span><br>$(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">height</span>(); <span class="hljs-comment">// 600</span><br><br><span class="hljs-comment">// HTML文档大小:</span><br>$(<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">width</span>(); <span class="hljs-comment">// 800</span><br>$(<span class="hljs-variable language_">document</span>).<span class="hljs-title function_">height</span>(); <span class="hljs-comment">// 3500</span><br><br><span class="hljs-comment">// 某个div的大小:</span><br><span class="hljs-keyword">var</span> div = $(<span class="hljs-string">&#x27;#test-div&#x27;</span>);<br>div.<span class="hljs-title function_">width</span>(); <span class="hljs-comment">// 600</span><br>div.<span class="hljs-title function_">height</span>(); <span class="hljs-comment">// 300</span><br>div.<span class="hljs-title function_">width</span>(<span class="hljs-number">400</span>); <span class="hljs-comment">// 设置CSS属性 width: 400px，是否生效要看CSS是否有效</span><br>div.<span class="hljs-title function_">height</span>(<span class="hljs-string">&#x27;200px&#x27;</span>); <span class="hljs-comment">// 设置CSS属性 height: 200px，是否生效要看CSS是否有效</span><br><br><span class="hljs-comment">// 属性操作</span><br>div.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;Hello&#x27;</span>);    <span class="hljs-comment">// 设置属性</span><br>div.<span class="hljs-title function_">removeAttr</span>(<span class="hljs-string">&#x27;name&#x27;</span>);       <span class="hljs-comment">// 移除属性</span><br>div.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;name&#x27;</span>);             <span class="hljs-comment">// 获取属性</span><br><br><span class="hljs-comment">// 无值属性，使用is()来判断</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;test-radio&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;test&quot;</span> <span class="hljs-attr">checked</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span></span><br><span class="language-xml">var radio = $(&#x27;#test-radio&#x27;);</span><br><span class="language-xml">radio.is(&#x27;:checked&#x27;); // true</span><br><span class="language-xml"></span><br><span class="language-xml">// val()方法获取和设置对应的value属性：</span><br><span class="language-xml">$().val()</span><br><span class="language-xml">$().val(&#x27;&#x27;)</span><br><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">// 添加DOM</span><br><span class="language-xml">// 要添加的DOM节点已经存在于HTML文档中，它会首先从文档移除，然后再添加，相当于移动节点</span><br><span class="language-xml">$().append();</span><br><span class="language-xml">$().after();</span><br><span class="language-xml">、删除DOM</span><br><span class="language-xml">$().remove(); //移除本身</span><br></code></pre></td></tr></table></figure>

<h3 id="jQuery事件"><a href="#jQuery事件" class="headerlink" title="jQuery事件"></a>jQuery事件</h3><h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><p>$().on(‘event’, fn)<br> $().on(‘click’, fn)  &#x3D;&#x3D;&#x3D; $().click(fn)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx">鼠标事件<br><span class="hljs-attr">click</span>: 鼠标单击时触发；<br>dblclick：鼠标双击时触发；<br>mouseenter：鼠标进入时触发；<br>mouseleave：鼠标移出时触发；<br>mousemove：鼠标在<span class="hljs-variable constant_">DOM</span>内部移动时触发；<br>hover：鼠标进入和退出时触发两个函数，相当于mouseenter加上mouseleave。<br><br>键盘事件<br>键盘事件仅作用在当前焦点的<span class="hljs-variable constant_">DOM</span>上，通常是&lt;input&gt;和&lt;textarea&gt;。<br>keydown：键盘按下时触发；<br>keyup：键盘松开时触发；<br>keypress：按一次键后触发。<br><br>其他事件<br>focus：当<span class="hljs-variable constant_">DOM</span>获得焦点时触发；<br>blur：当<span class="hljs-variable constant_">DOM</span>失去焦点时触发；<br>change：当&lt;input&gt;、&lt;select&gt;或&lt;textarea&gt;的内容改变时触发；<br>submit：当&lt;form&gt;提交时触发；<br>ready：当页面被载入并且<span class="hljs-variable constant_">DOM</span>树完成初始化后触发。仅作用于<span class="hljs-variable language_">document</span>对象<br>ready事件的三次简化：   <br><span class="hljs-string">`document.on(&#x27;ready&#x27;,fn)`</span> ===&gt;  <span class="hljs-string">`$(document).ready(fn)`</span> ===&gt; <span class="hljs-string">`$(function () &#123;&#125;)`</span><br>如果你遇到$(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;...&#125;)的形式，牢记这是<span class="hljs-variable language_">document</span>对象的ready事件处理函数。<br></code></pre></td></tr></table></figure>

<h4 id="取消绑定"><a href="#取消绑定" class="headerlink" title="取消绑定"></a>取消绑定</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">$().<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;click&#x27;</span>, fn);  <span class="hljs-comment">// fn只能传入绑定时的函数，不可包含定义</span><br><br><span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;click&#x27;</span>)           <span class="hljs-comment">// 一次性移除已绑定的click事件的所有处理函数。</span><br><br><span class="hljs-comment">// 无效的解除绑定，因此此处的fn对应的是一个新函数</span><br>a.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;hello!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="事件触发条件"><a href="#事件触发条件" class="headerlink" title="事件触发条件"></a>事件触发条件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 监控改动</span><br>$().<span class="hljs-title function_">change</span>(fn)<br></code></pre></td></tr></table></figure>

<h3 id="jQuery-AJAX"><a href="#jQuery-AJAX" class="headerlink" title="jQuery AJAX"></a>jQuery AJAX</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> jqxhr = $.<span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;/api/categories&#x27;</span>, &#123;<br>    <span class="hljs-attr">dataType</span>: <span class="hljs-string">&#x27;json&#x27;</span><br>&#125;);<br><span class="hljs-comment">// 请求已经发送了</span><br></code></pre></td></tr></table></figure>

<p>ajax的链式调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ajax的链式调用</span><br><span class="hljs-keyword">var</span> jqxhr = $.<span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;/api/categories&#x27;</span>, &#123;<br>    <span class="hljs-attr">dataType</span>: <span class="hljs-string">&#x27;json&#x27;</span><br>&#125;).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-comment">// 请求成功</span><br>    <span class="hljs-title function_">ajaxLog</span>(<span class="hljs-string">&#x27;成功, 收到的数据: &#x27;</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));<br>&#125;).<span class="hljs-title function_">fail</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">xhr, status</span>) &#123;<br>    <span class="hljs-comment">// 请求失败</span><br>    <span class="hljs-title function_">ajaxLog</span>(<span class="hljs-string">&#x27;失败: &#x27;</span> + xhr.<span class="hljs-property">status</span> + <span class="hljs-string">&#x27;, 原因: &#x27;</span> + status);<br>&#125;).<span class="hljs-title function_">always</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 必然调用</span><br>    <span class="hljs-title function_">ajaxLog</span>(<span class="hljs-string">&#x27;请求完成: 无论成功或失败都会调用&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>辅助方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// get方法，直接传参；获取返回的json</span><br><span class="hljs-keyword">var</span> jqxhr = $.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/path/to/resource&#x27;</span>, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Bob Lee&#x27;</span>,<br>    <span class="hljs-attr">check</span>: <span class="hljs-number">1</span><br>&#125;).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-comment">// data已经被解析为JSON对象了</span><br>&#125;);<br><br><span class="hljs-comment">// post方法，数据作为body被发送</span><br><span class="hljs-keyword">var</span> jqxhr = $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/path/to/resource&#x27;</span>, &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Bob Lee&#x27;</span>,<br>    <span class="hljs-attr">check</span>: <span class="hljs-number">1</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="jQuery插件扩展"><a href="#jQuery插件扩展" class="headerlink" title="jQuery插件扩展"></a>jQuery插件扩展</h3><p>给$.fn绑定函数，实现插件的代码逻辑；<br> 插件函数最后要return this;以支持链式调用；<br> 插件函数要有默认值，绑定在$.fn.<pluginName>.defaults上；<br> 用户在调用时可传入设定值以便覆盖默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 给jQuery对象绑定一个新方法是通过扩展$.fn对象实现的。</span><br>$.fn.<span class="hljs-property">highlight</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) &#123;<br>    <span class="hljs-comment">// 合并默认值和用户设定值:</span><br>    <span class="hljs-comment">// 使用jQuery提供的辅助方法$.extend(target, obj1, obj2, ...)，它把多个object对象的属性合并到第一个target对象中，遇到同名属性，总是使用靠后的对象的值，也就是越往后优先级越高：</span><br>    <span class="hljs-keyword">var</span> opts = $.<span class="hljs-title function_">extend</span>(&#123;&#125;, $.fn.<span class="hljs-property">highlight</span>.<span class="hljs-property">defaults</span>, options);<br>    <span class="hljs-comment">// 函数内部的this在调用时被绑定为jQuery对象，所以函数内部代码可以正常调用所有jQuery对象的方法。</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;backgroundColor&#x27;</span>, opts.<span class="hljs-property">backgroundColor</span>).<span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;color&#x27;</span>, opts.<span class="hljs-property">color</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-comment">// 添加添加return this，是因为jQuery对象支持链式操作，我们自己写的扩展方法也要能继续链式下去：</span><br>&#125;<br><br><span class="hljs-comment">// 设定默认值: 把默认值放在这个函数对象当中，允许用户修改，而且比较合适</span><br>$.fn.<span class="hljs-property">highlight</span>.<span class="hljs-property">defaults</span> = &#123;<br>    <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#d85030&#x27;</span>,<br>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#fff8de&#x27;</span><br>&#125;<br><br><span class="hljs-comment">// 用户使用时，一次性设定默认值；</span><br>$.fn.<span class="hljs-property">highlight</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">color</span> = <span class="hljs-string">&#x27;#fff&#x27;</span>;<br>$.fn.<span class="hljs-property">highlight</span>.<span class="hljs-property">defaults</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;#000&#x27;</span>;<br></code></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 特定元素扩展</span><br><span class="hljs-comment">// 示例：给所有指向外链的超链接加上跳转提示</span><br>$.fn.<span class="hljs-property">external</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// return返回的each()返回结果，支持链式调用:</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;a&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">// 注意: each()内部的回调函数的this绑定为DOM本身!</span><br>        <span class="hljs-keyword">var</span> a = $(<span class="hljs-variable language_">this</span>);<br>        <span class="hljs-keyword">var</span> url = a.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>);<br>        <span class="hljs-keyword">if</span> (url &amp;&amp; (url.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;http://&#x27;</span>)===<span class="hljs-number">0</span> || url.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;https://&#x27;</span>)===<span class="hljs-number">0</span>)) &#123;<br>            a.<span class="hljs-title function_">attr</span>(<span class="hljs-string">&#x27;href&#x27;</span>, <span class="hljs-string">&#x27;#0&#x27;</span>)<br>             .<span class="hljs-title function_">removeAttr</span>(<span class="hljs-string">&#x27;target&#x27;</span>)<br>             .<span class="hljs-title function_">append</span>(<span class="hljs-string">&#x27; &lt;i class=&quot;uk-icon-external-link&quot;&gt;&lt;/i&gt;&#x27;</span>)<br>             .<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-title function_">confirm</span>(<span class="hljs-string">&#x27;你确定要前往&#x27;</span> + url + <span class="hljs-string">&#x27;？&#x27;</span>)) &#123;<br>                    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(url);<br>                &#125;<br>            &#125;);<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><h4 id="捕获、处理错误"><a href="#捕获、处理错误" class="headerlink" title="捕获、处理错误"></a>捕获、处理错误</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">try</span> &#123;<br><br>&#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><br>&#125; <span class="hljs-keyword">finally</span> &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p>try{}包裹的代码，在执行中可能会发生错误，一旦出错，不再执行后续；跳转到catch块进行错误处理；最后无论有无错误，finally都执行。catch与finally可以只出现一个。</p>
<h4 id="主动抛出错误"><a href="#主动抛出错误" class="headerlink" title="主动抛出错误"></a>主动抛出错误</h4><p>允许抛出任意对象，包括数字、字符串。但是，最好还是抛出一个Error对象。<br> <code>throw new Error(&#39;&#39;);</code><br> 错误会一直向上抛，直到遇到一个有try-catch语句的函数；</p>
<h3 id="underscore第三方库，提供对Object的方法支持"><a href="#underscore第三方库，提供对Object的方法支持" class="headerlink" title="underscore第三方库，提供对Object的方法支持"></a>underscore第三方库，提供对Object的方法支持</h3><p>使用“_”绑定全局变量；类似于jQuery的“$”</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">_.<span class="hljs-title function_">map</span>(obj, fn)        <span class="hljs-comment">// 返回Array</span><br>_.<span class="hljs-title function_">mapObject</span>(obj, fn)  <span class="hljs-comment">// 返回Obejct</span><br><br><span class="hljs-comment">// some 与 every   类似于filter的筛选功能</span><br>_.<span class="hljs-title function_">some</span>(obj, fn)      <span class="hljs-comment">// obj中的至少一个元素满足条件，有一个fn返回true，_.some()就返回true</span><br>_.<span class="hljs-title function_">every</span>(obj, fn)     <span class="hljs-comment">// 对每一个obj的所有元素都满足条件，即每一个fn都返回true，_.every()才返回true</span><br></code></pre></td></tr></table></figure>

<h4 id="分组-groupBy-obj-fn"><a href="#分组-groupBy-obj-fn" class="headerlink" title="分组 _.groupBy(obj, fn)"></a>分组 _.groupBy(obj, fn)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> scores = [<span class="hljs-number">20</span>, <span class="hljs-number">81</span>, <span class="hljs-number">75</span>, <span class="hljs-number">40</span>, <span class="hljs-number">91</span>, <span class="hljs-number">59</span>, <span class="hljs-number">77</span>, <span class="hljs-number">66</span>, <span class="hljs-number">72</span>, <span class="hljs-number">88</span>, <span class="hljs-number">99</span>];<br><span class="hljs-keyword">var</span> groups = _.<span class="hljs-title function_">groupBy</span>(scores, <span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">60</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;C&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">80</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;B&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;A&#x27;</span>;<br>    &#125;<br>&#125;);<br><br><span class="hljs-comment">// 结果:</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//   A: [81, 91, 88, 99],</span><br><span class="hljs-comment">//   B: [75, 77, 66, 72],</span><br><span class="hljs-comment">//   C: [20, 40, 59]</span><br><span class="hljs-comment">// &#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="打乱shuffle与随机取sample"><a href="#打乱shuffle与随机取sample" class="headerlink" title="打乱shuffle与随机取sample"></a>打乱shuffle与随机取sample</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">_.<span class="hljs-title function_">shuffle</span>(obj)<br>_.<span class="hljs-title function_">shuffle</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]); <span class="hljs-comment">// [3, 5, 4, 6, 2, 1]</span><br><br>_.<span class="hljs-title function_">sample</span>(obj)<br><span class="hljs-comment">// 随机选1个：</span><br>_.<span class="hljs-title function_">sample</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]); <span class="hljs-comment">// 2</span><br><span class="hljs-comment">// 随机选3个：</span><br>_.<span class="hljs-title function_">sample</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-number">3</span>); <span class="hljs-comment">// [6, 1, 4]</span><br></code></pre></td></tr></table></figure>

<h4 id="Array工具类"><a href="#Array工具类" class="headerlink" title="Array工具类"></a>Array工具类</h4><ul>
<li>_.first(arr)              &#x2F;&#x2F;  取首</li>
<li>_.last(arr)               &#x2F;&#x2F;  取尾</li>
<li>_.flatten(array)          &#x2F;&#x2F; 多层嵌套数组 &#x3D;&#x3D;&#x3D;&gt; 一维数组</li>
<li>_.range(start, end, step) &#x2F;&#x2F; 快速生成序列，start默认0，step默认1</li>
</ul>
<p>zip与unzip与Object</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// zip 一一对应，合并</span><br><span class="hljs-keyword">var</span> names = [<span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-string">&#x27;Lisa&#x27;</span>, <span class="hljs-string">&#x27;Bart&#x27;</span>];<br><span class="hljs-keyword">var</span> scores = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">59</span>];<br>_.<span class="hljs-title function_">zip</span>(names, scores);<br><span class="hljs-comment">// [[&#x27;Adam&#x27;, 85], [&#x27;Lisa&#x27;, 92], [&#x27;Bart&#x27;, 59]]</span><br><br><br><span class="hljs-comment">// unzip 一一拆解</span><br><span class="hljs-keyword">var</span> namesAndScores = [[<span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-number">85</span>], [<span class="hljs-string">&#x27;Lisa&#x27;</span>, <span class="hljs-number">92</span>], [<span class="hljs-string">&#x27;Bart&#x27;</span>, <span class="hljs-number">59</span>]];<br>_.<span class="hljs-title function_">unzip</span>(namesAndScores);<br><span class="hljs-comment">// [[&#x27;Adam&#x27;, &#x27;Lisa&#x27;, &#x27;Bart&#x27;], [85, 92, 59]]</span><br><br><br><span class="hljs-comment">// 一一对应，合并为对象</span><br><span class="hljs-keyword">var</span> names = [<span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-string">&#x27;Lisa&#x27;</span>, <span class="hljs-string">&#x27;Bart&#x27;</span>];<br><span class="hljs-keyword">var</span> scores = [<span class="hljs-number">85</span>, <span class="hljs-number">92</span>, <span class="hljs-number">59</span>];<br>_.<span class="hljs-title function_">object</span>(names, scores);<br><span class="hljs-comment">// &#123;Adam: 85, Lisa: 92, Bart: 59&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="高阶函数-1"><a href="#高阶函数-1" class="headerlink" title="高阶函数"></a>高阶函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">- _.<span class="hljs-title function_">bind</span>(fn, newThis)   <span class="hljs-comment">// 获取方法，传入原来方法的this才能保证方法被获取后成功调用</span><br>- _.<span class="hljs-title function_">partial</span>(fn, constParam)        <span class="hljs-comment">// 为一个函数创建偏函数，为fn固定第一个参数</span><br>- _.<span class="hljs-title function_">partial</span>(fn, _, constParam)     <span class="hljs-comment">// 为一个函数创建偏函数，_占位，为fn固定第二个参数</span><br><br>- _.<span class="hljs-title function_">memoize</span>(fn)  <span class="hljs-comment">// 缓存某个函数在某个参数下的计算结果</span><br>- _.<span class="hljs-title function_">once</span>(fn)     <span class="hljs-comment">// 返回一个只能被调用一次的函数</span><br>- _.<span class="hljs-title function_">delay</span>(fn, time, param)  <span class="hljs-comment">// 同setTimeOut</span><br></code></pre></td></tr></table></figure>

<h3 id="Object-工具类"><a href="#Object-工具类" class="headerlink" title="Object 工具类"></a>Object 工具类</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php">_.<span class="hljs-title function_ invoke__">keys</span>(obj)     <span class="hljs-comment">// 返回一个object自身所有的key，但不包含从原型链继承下来的</span><br>_.<span class="hljs-title function_ invoke__">allKeys</span>(obj)  <span class="hljs-comment">// allKeys()除了object自身的key，还包含从原型链继承下来的：</span><br>_.<span class="hljs-title function_ invoke__">values</span>(obj)   <span class="hljs-comment">// 返回object自身但不包含原型链继承的所有值</span><br>_.<span class="hljs-title function_ invoke__">invert</span>(obj)   <span class="hljs-comment">// 把object的每个key-value来个交换，key变成value，value变成key</span><br>_.<span class="hljs-title function_ invoke__">extend</span>(obj,obj,obj)  <span class="hljs-comment">//把多个object的key-value合并到第一个object并返回</span><br>_.<span class="hljs-title function_ invoke__">extendOwn</span>()    <span class="hljs-comment">// 和extend()类似，但获取属性时忽略从原型链继承下来的属性</span><br>_.<span class="hljs-keyword">clone</span>()        <span class="hljs-comment">// 复制obj，就不需要遍历每个key了</span><br>_.<span class="hljs-title function_ invoke__">isEqual</span>()      <span class="hljs-comment">// 内容层面的深度比较</span><br></code></pre></td></tr></table></figure>

<h3 id="像jQuery一样链式调用-chain"><a href="#像jQuery一样链式调用-chain" class="headerlink" title="像jQuery一样链式调用  .chain()"></a>像jQuery一样链式调用  .chain()</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-comment">// 非链式调用</span><br>_.<span class="hljs-title function_">filter</span>(_.<span class="hljs-title function_">map</span>([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>], <span class="hljs-title class_">Math</span>.<span class="hljs-property">sqrt</span>), <span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x % <span class="hljs-number">2</span> === <span class="hljs-number">1</span>);   <span class="hljs-comment">// [1, 3, 5]</span><br><br><br><span class="hljs-comment">// 通过_.chain()实现链式调用</span><br>_.<span class="hljs-title function_">chain</span>([<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>])<br> .<span class="hljs-title function_">map</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">sqrt</span>)<br> .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x % <span class="hljs-number">2</span> === <span class="hljs-number">1</span>)<br> .<span class="hljs-title function_">value</span>();                 <span class="hljs-comment">// [1, 3, 5]</span><br></code></pre></td></tr></table></figure>
              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/a937321983/a937321983.atomgit.io.git/categories/js/" class="category-chain-item">js</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/a937321983/a937321983.atomgit.io.git/tags/basics/">#basics</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>javascript基础</div>
      <div>https://atomgit.com/a937321983/a937321983.atomgit.io.git/2021/12/20/js-basics/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>liyongci</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年12月20日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/a937321983/a937321983.atomgit.io.git/2021/12/20/js-tenSort/" title="javascript十大排序">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">javascript十大排序</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/a937321983/a937321983.atomgit.io.git/2021/12/14/css-flex/" title="CSS flex布局">
                        <span class="hidden-mobile">CSS flex布局</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://unpkg.com/valine@1.4.18/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"enable":true,"appId":"ikSRtRd5Vl7WWto2wP6TxeTR-gzGzoHsz","appKey":"8wQuPPL51zNiwysVTkN0lTgy","path":"window.location.pathname","placeholder":"欢迎各位大佬发言","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://gitee.com" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://gitee.com/a937321983/blog" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/a937321983/a937321983.atomgit.io.git/js/events.js" ></script>
<script  src="/a937321983/a937321983.atomgit.io.git/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/a937321983/a937321983.atomgit.io.git/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/a937321983/a937321983.atomgit.io.git/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/a937321983/a937321983.atomgit.io.git/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
